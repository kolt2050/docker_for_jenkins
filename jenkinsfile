node {
    checkout scm

    docker.withRegistry('https://hub.docker.com') {

        docker.image('kolt2050/jenkins_docker').inside {
           sh 'docker --version' 
           sh 'echo 1234'
        }
    }
    stage('Clone repo') {
        println("HELLO")
        sh 'git clone https://github.com/epam/edp-install.git'
        sh"""#!/bin/bash
           docker --version
           
           
           cd edp-install
           ls -la
           echo "---------------build docs--------------"
           make build-docs
           echo "---------------site is here--------------"
           ls -la ../
           mv site ../
           git checkout gh-pages
           ls -la
           rm -rf *
           echo "Clear gh-pages"
           cp ../site .
           ls -la
        """
        
    }
}
